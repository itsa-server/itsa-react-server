"use strict";!function(){var t=arguments,e=t[0],n={cacheName:"itsa-react-server-cache-"+t[1],version:t[1],urlsToCache:t[2],offlineImage:t[3],offlinePage:t[4],cdnUrl:t[5],socketPort:t[6]},r=function(t,e,n){var r,a;if(!n.ok)throw new Error("bad response");return a=new URL(e.url),"true"===n.headers.get("x-noauth")?n:(r=n.clone(),caches.open(t).then(function(t){var n,s,i=a.pathname.startsWith("/_itsa_server_ajax_/props/");i&&(n=e.url.indexOf("?"),-1!==n&&(s=new Request(e.url.substring(0,n)))),t.put(s||e,r)}),n)};e.addEventListener("install",function(t){var e=function(t,e){var n=e.map(function(e){var n=new Request(e,{headers:new Headers({"x-itsa-serviceworker-init":"true"})});return fetch(n).then(r.bind(null,t,n))});return Promise.all(n)},a=function(t){return e(t.cacheName,t.urlsToCache).then(function(){return self.skipWaiting()}).catch(function(t){})};t.waitUntil(a(n))}),e.addEventListener("fetch",function(t){var a=function(t,n){var r=t.request||{},a=new URL(r.url),s=r.headers.get("x-cookie"),i={matchesPathPattern:"/_itsa_server_serviceworker.js"!==a.pathname,isGETRequest:"GET"===r.method,isFromMyOrigin:a.origin===e.location.origin||a.origin.startsWith(n.cdnUrl),isNotSocketServer:a.port!==n.socketPort,isNotPropsRequestWithCookie:!a.pathname.startsWith("/_itsa_server_ajax_/props/")||!s,isPartOfList:-1!==n.urlsToCache.indexOf(a.pathname)};return!Object.keys(i).some(function(t){return!i[t]})},s=function(t,e){var n=new URL(t.url),r=n.pathname.startsWith("/_itsa_server_ajax_/css/")||n.pathname.startsWith("/_itsa_server_ajax_/comp/"),a={contentAndNotAjaxStatic:"content"===e&&!r,hasTimeStamp:/[&|?]_ts=(\d){13}/.test(n.search),ajaxProps:n.pathname.startsWith("/_itsa_server_ajax_/props/")};return!!Object.keys(a).find(function(t){return a[t]})},i=function(t){var e=new URL(t.url),n=e.pathname,r={staticExternalModules:n.startsWith("/assets/_itsa_server_external_modules/"),staticJsAndCss:n.startsWith("/assets/local"),staticCommonsJsAndView:/\/assets\/\d+\.\d+\.\d+\/_itsa_server_commons\//.test(n),ajaxStatic:n.startsWith("/_itsa_server_ajax_/css/")||n.startsWith("/_itsa_server_ajax_/comp/"),hasTimeStamp:/[&|?]_ts=(\d){13}/.test(e.search)};return!Object.keys(r).some(function(t){return r[t]})},c=function(t){var e,n,r=new URL(t.url),a=r.pathname.startsWith("/_itsa_server_ajax_/props/");return a&&(e=t.url.indexOf("?"),-1!==e&&(n=new Request(t.url.substring(0,e)))),caches.match(n||t).then(function(e){if(!e)throw Error((n||t).url+" not found in cache");return e})},o=function(t,e){return"image"===t?new Response(e.offlineImage,{headers:{"Content-Type":"image/svg+xml"}}):"content"===t?caches.match(e.offlinePage):void 0},u=function(t,e,n,a){return fetch(t).then(r.bind(null,n,t)).catch(function(){return c(t,a)}).catch(function(){return o(e,a)})},h=function(t,e,n,a){return c(t,a).then(function(e){return i(t)&&fetch(t).then(function(e){return r(n,t,e)}),e},function(){return fetch(t).then(function(e){return r(n,t,e)})}).catch(function(){return o(e,a)})},f=function(t,e){var n=t.request,r="static",a=n.headers.get("Accept"),i=e.cacheName;-1!==a.indexOf("text/html")?r="content":-1!==a.indexOf("image")&&(r="image"),t.respondWith(s(n,r)?u(n,r,i,e):h(n,r,i,e))};a(t,n)&&f(t,n)}),e.addEventListener("activate",function(t){var r=function(t,e){return caches.keys().then(function(t){var n=t.filter(function(t){return t!==e.cacheName}).map(function(t){return caches.delete(t)});return Promise.all(n)})};t.waitUntil(r(t,n).then(function(){return e.clients.claim()}))})}(autoparams);